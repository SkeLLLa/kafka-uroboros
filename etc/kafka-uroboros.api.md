## API Report File for "kafka-uroboros"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
/// <reference types="node" />

import EventEmitter from 'node:events';
import {
  EachBatchHandler,
  EachMessageHandler,
  KafkaJSNonRetriableError,
  Producer,
  type EachBatchPayload,
  type EachMessagePayload,
  type KafkaMessage,
} from 'kafkajs';
import {
  TDLQTopicNameGenerator as TDLQTopicNameGenerator_2,
  TRetryTopicNameGenerator as TRetryTopicNameGenerator_2,
} from '../..';

// Warning: (ae-forgotten-export) The symbol "IAsyncRetryConsumerEventMap" needs to be exported by the entry point index.d.ts
//
// @public
export class AsyncRetryConsumer extends EventEmitter<IAsyncRetryConsumerEventMap> {
  constructor({
    maxRetries,
    retryDelaysSeconds,
    maxWaitTime,
    producer,
    topic,
    dlqTopicNameGenerator,
    retryTopicNameGenerator,
  }: IAsyncRetryConsumerOptions);
  eachBatch(handler: TAsyncRetryConsumerBatchHandler): EachBatchHandler;
  eachMessage(handler: TAsyncRetryConsumerMessageHandler): EachMessageHandler;
  static readonly events: typeof EAsyncRetryConsumerEvents;
  // (undocumented)
  on(
    event: EAsyncRetryConsumerEvents.DEAD_LETTER,
    listener: (data: IEventPayload) => void,
  ): this;
  // (undocumented)
  on(
    event: EAsyncRetryConsumerEvents.RETRY,
    listener: (data: IEventPayload) => void,
  ): this;
  readonly retryDelaysSeconds: number[];
  // Warning: (ae-incompatible-release-tags) The symbol "topics" is marked as @public, but its signature references "ITopics" which is marked as @internal
  readonly topics: ITopics;
}

// @public
export class AsyncRetryConsumerError extends Error {
  // Warning: (ae-forgotten-export) The symbol "IAsyncRetryConsumerErrorOptions" needs to be exported by the entry point index.d.ts
  constructor({ message, code }: IAsyncRetryConsumerErrorOptions);
  // Warning: (ae-forgotten-export) The symbol "EAsyncRetryConsumerErrorCode" needs to be exported by the entry point index.d.ts
  //
  // (undocumented)
  readonly code: EAsyncRetryConsumerErrorCode;
}

// @public
export class AsyncRetryConsumerHeaders
  implements IAsyncRetryConsumerMessageHeaders
{
  constructor(headers: KafkaMessage['headers']);
  // (undocumented)
  readonly att: number;
  // (undocumented)
  readonly isValid: boolean;
  // (undocumented)
  readonly top: string;
  // (undocumented)
  readonly ttl: number;
}

// Warning: (ae-internal-missing-underscore) The name "DeadLetter" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export class DeadLetter extends Error {
  constructor(reason: string);
}

// @public (undocumented)
export enum EAsyncRetryConsumerEvents {
  // (undocumented)
  DEAD_LETTER = 'dl',
  // (undocumented)
  RETRY = 'retry',
}

// @public (undocumented)
export interface IAsyncRetryConsumerEachBatchPayload extends EachBatchPayload {
  asyncRetryMessageDetails: (
    message: KafkaMessage,
  ) => IAsyncRetryConsumerMessageDetails;
  messageFailureHandler: (error: Error, message: KafkaMessage) => Promise<void>;
}

// @public
export interface IAsyncRetryConsumerEachMessagePayload
  extends EachMessagePayload {
  isRetry: boolean;
  originalTopic: string;
  previousAttempts: number;
  processTime: Date;
}

// @public (undocumented)
export interface IAsyncRetryConsumerMessageDetails {
  isReady: boolean;
  isRetry: boolean;
  originalTopic: string;
  previousAttempts: number;
  processTime: Date;
}

// @public (undocumented)
export interface IAsyncRetryConsumerMessageHeaders {
  att: number;
  top: string;
  ttl: number;
}

// @public
export interface IAsyncRetryConsumerOptions {
  dlqTopicNameGenerator?: TDLQTopicNameGenerator;
  maxRetries?: number;
  maxWaitTime?: number;
  producer: Pick<Producer, 'send'>;
  retryDelaysSeconds?: number[];
  retryTopicNameGenerator?: TRetryTopicNameGenerator;
  topic: string;
}

// @public (undocumented)
export interface IDLQTopicNameGeneratorOptions {
  topic: string;
}

// @public (undocumented)
export interface IEventPayload {
  details: Omit<IAsyncRetryConsumerMessageDetails, 'isReady'>;
  error: unknown;
  message: KafkaMessage;
  topic: string;
}

// @public (undocumented)
export interface IRetryTopicNameGeneratorOptions
  extends IDLQTopicNameGeneratorOptions {
  attempt: number;
  delay: number;
  topic: string;
}

// Warning: (ae-internal-missing-underscore) The name "ITopics" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export interface ITopics {
  // (undocumented)
  dlq: [string];
  // (undocumented)
  original: [string];
  // (undocumented)
  retries: string[];
}

// Warning: (ae-internal-missing-underscore) The name "PauseProcessing" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export class PauseProcessing extends KafkaJSNonRetriableError {
  constructor(waitMs: number, topic: string, partition: number);
  // (undocumented)
  readonly partition: number;
  // (undocumented)
  readonly topic: string;
  // (undocumented)
  readonly waitMs: number;
}

// @public (undocumented)
export type TAsyncRetryConsumerBatchHandler = (
  payload: IAsyncRetryConsumerEachBatchPayload,
) => Promise<void>;

// @public (undocumented)
export type TAsyncRetryConsumerMessageHandler = (
  payload: IAsyncRetryConsumerEachMessagePayload,
) => Promise<void>;

// @public
export type TDLQTopicNameGenerator = (
  options: IDLQTopicNameGeneratorOptions,
) => string;

// @public (undocumented)
export class TopicNameGenerator {
  // (undocumented)
  static delay: TRetryTopicNameGenerator_2;
  // (undocumented)
  static dlq: TDLQTopicNameGenerator_2;
  // (undocumented)
  static retry: TRetryTopicNameGenerator_2;
}

// @public
export type TRetryTopicNameGenerator = (
  options: IRetryTopicNameGeneratorOptions,
) => string;

// (No @packageDocumentation comment for this package)
```
